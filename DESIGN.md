# 位置情報付加支援アプリ 設計書

## 利用環境

- Python 3.x
- Windows OS

## 目的

デジカメで撮ったJPEGやRAWデータにGoogleマップのタイムラインから取得した位置情報を埋め込みたい。

## 処理の流れ

### 前提作業

ここは自動化しようがないので手動で実行する。
（2回目以降は2からでOK）

1. スマホのGoogleマップでバックアップを有効化する
2. Googleデータエクスポートで位置情報のJSONを取得する
3. 取得したJSONファイルをdataフォルダに配置する

上記はバックアップ有効化後からの位置情報しか取得できないので、即座に使用したい場合は以下の手順を実施する。

1. スマホ（Android）の設定→位置情報→位置情報サービス→タイムライン→タイムラインをエクスポート→Googleドライブ等に保存
2. 取得したJSONファイルをdataフォルダに配置する

### プログラム起動直後の画面

以下の要素を持つ

- 読み込む位置情報のJSONファイル指定ボタン
- 読み込む写真のフォルダ指定ボタン
- EXIF情報を付加した後のファイルの配置先フォルダ指定ボタン
- 既に位置情報が設定されている場合に上書きするか否かのチェックボックス
- 処理開始ボタン

※2回目以降の起動時は前回の指定内容を保持する

### 自動化部分

1. フォルダ内の画像リストを作成（再帰的にチェックしてフォルダ内の全画像を対象とする）
2. 画像の作成日時を確認、一番近い時間の位置情報をEXIFとして付加する
  - 位置情報以外のEXIF情報は既存のものを保持する
3. 処理の終わった画像ファイルを処理後フォルダに移動する
4. 全画像に対して2,3を繰り返す
